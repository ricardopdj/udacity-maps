(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,n,t){e.exports=t(71)},41:function(e,n,t){},45:function(e,n,t){e.exports=t.p+"static/media/logo.ee7cd8ed.svg"},46:function(e,n,t){},71:function(e,n,t){"use strict";t.r(n);var o=t(1),a=t.n(o),r=t(31),s=t.n(r),i=(t(41),t(43),t(6)),c=t(7),u=t(9),l=t(8),p=t(10),m=(t(45),t(46),t(75)),d=t(76),f=t(77),h=(o.Component,t(16)),g=t.n(h),v=window.google,w=function(e){function n(){var e,t;Object(i.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=Object(u.a)(this,(e=Object(l.a)(n)).call.apply(e,[this].concat(a)))).state={mapLoaded:!1},t}return Object(p.a)(n,e),Object(c.a)(n,[{key:"getGoogleMaps",value:function(){return this.googleMapsPromise||(this.googleMapsPromise=new Promise(function(e){window.resolveGoogleMapsPromise=function(){e(v),delete window.resolveGoogleMapsPromise};var n=document.createElement("script");n.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyC0FRwnvyqQbxEaU8JOuCojITxhb3bxdCQ","&callback=resolveGoogleMapsPromise"),n.async=!0,document.body.appendChild(n)})),this.googleMapsPromise}},{key:"componentWillMount",value:function(){this.getGoogleMaps()}},{key:"componentDidMount",value:function(){var e=this;this.getGoogleMaps().then(function(n){e.createMap()})}},{key:"createMap",value:function(){var e=new window.google.maps.Map(document.getElementById("map"),{zoom:15,center:{lat:-30.0331,lng:-51.23}});this.props.onCreate(e)}},{key:"render",value:function(){return a.a.createElement("div",{id:"map",className:"h-100"})}}]),n}(o.Component),b=t(32),y=t(72),k=t(78),E=t(73),M=t(74),O=function(e){function n(){var e,t;Object(i.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=Object(u.a)(this,(e=Object(l.a)(n)).call.apply(e,[this].concat(a)))).updateQuery=function(e){t.props.onSearch(e)},t.openInfo=function(e){t.props.onOpenInfo(e)},t}return Object(p.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){var e=this,n=this.props.venues;return a.a.createElement("aside",{className:"py-2"},a.a.createElement("h1",null,"Porto Alegre Sights"),a.a.createElement(y.a,{className:"my-4"},a.a.createElement(b.Debounce,{time:"400",handler:"onChange"},a.a.createElement(k.a,{placeholder:"Filtrar",onChange:function(n){return e.updateQuery(n.target.value)}}))),a.a.createElement(E.a,null,n.length>0&&n.map(function(n,t){return a.a.createElement(M.a,{tag:"button",key:t,onClick:function(){return e.openInfo(n)}},n.name)})))}}]),n}(o.Component),j="".concat("https://api.foursquare.com/v2/venues/explore?","client_id=").concat("PNOZ54G0GD1T1N4MKUX2CXIRA3BF34R3BAKVZPRHX40GBYLK","&client_secret=").concat("H0LKKTR4QAXQEL2V42D123TKQ31CZQE0LULYNLLNZEBIJTBS","&v=20180323&limit=").concat(5,"&ll=").concat("-30.0346471, -51.2176584","&section=").concat("sights"),C=function(e){function n(){var e,t;Object(i.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=Object(u.a)(this,(e=Object(l.a)(n)).call.apply(e,[this].concat(a)))).state={venues:[],visibleVenues:[],map:null,infoWindow:null,bounds:null,markers:[]},t.setMap=function(e){console.log("map created"),t.setState({map:e,infoWindow:new window.google.maps.InfoWindow,bounds:new window.google.maps.LatLngBounds});var n=t.createMarkers(e);t.setState({markers:n})},t.createMarkers=function(e){return t.state.venues.map(function(n){var o=new window.google.maps.Marker({position:n.location,map:e});return o.id=n.id,o.name=n.name,o.addListener("click",function(){return t.openInfo(n)}),t.fitBounds(o.position),o})},t.updateQuery=function(e){var n=new RegExp(g()(e),"i");t.setState({visibleVenues:t.state.venues.filter(function(e){return n.test(e.name)})}),t.state.infoWindow&&t.state.infoWindow.close(),t.state.markers.map(function(e){e.setVisible(n.test(e.name))})},t.openInfo=function(e){t.state.infoWindow.setContent("<h4>".concat(e.name,"</h4><p>").concat(e.location.address,"</p>"));var n=t.state.markers.find(function(n){return n.id==e.id});t.state.infoWindow.open(t.state.map,n),t.state.map.panTo(n.getPosition())},t.fitBounds=function(e){t.state.bounds.extend(e),t.state.map.fitBounds(t.state.bounds)},t}return Object(p.a)(n,e),Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch(j).then(function(e){return e.json()}).then(function(e){return e.response.groups[0].items}).then(function(e){return e.map(function(e){return e.venue})}).catch(function(e){return console.log("Erro ao consultar a api do Foursquare",e)}).then(function(n){e.setState({venues:n,visibleVenues:n}),console.log("venues loaded")})}},{key:"render",value:function(){return a.a.createElement(m.a,{fluid:!0,className:"h-100"},this.state.venues.length>0&&a.a.createElement(d.a,{className:"h-100"},a.a.createElement(f.a,{xs:"12",md:"4"},a.a.createElement(O,{venues:this.state.visibleVenues,onSearch:this.updateQuery,onOpenInfo:this.openInfo})),a.a.createElement(f.a,{xs:"12",md:"8"},a.a.createElement(w,{onCreate:this.setMap,venues:this.state.visibleVenues,query:this.state.query}))))}}]),n}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,2,1]]]);
//# sourceMappingURL=main.e7ebb662.chunk.js.map